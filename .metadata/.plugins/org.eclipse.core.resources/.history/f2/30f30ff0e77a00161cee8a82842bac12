package exercise64Staff;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.text.DecimalFormat;
/**
 * Author: Le Phuong Thanh 
 * Date: 27/08/2016 
 * Version: 1.0 
 * Create MainClass of salary
 *
 */
public class MainClass {

	public static void main(String[] args) {
		try {
			BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
			Exercise16Person eperson = new Exercise16Person();
			Employee esalary = new Employee();

			System.out.println("Enter your name: ");
			String name = input.readLine();
			eperson.setName(name);

			System.out.println("Enter your coefficients: ");
			double coefficients = Double.parseDouble(input.readLine());
			esalary.setCoefficients(coefficients);;

			System.out.println("Enter your number person: ");
			int numberPerson = Integer.parseInt(input.readLine());
			esalary.setNumberPerson(numberPerson);

			System.out.println("Enter your allowance: ");
			double allowance = Double.parseDouble(input.readLine());
			esalary.setAllowance(allowance); 
			
			DecimalFormat decimal=new DecimalFormat("#,###");
			double incom = esalary.calSalary();
			System.out.println("Incom: " + decimal.format(incom));
			
			double incomeTaxes=esalary.calcIncomeTaxes();
			System.out.println("Incone Taxes: "+decimal.format(incomeTaxes));
			
			double resultrsonalncomeTax=esalary.calcPersonalIncomeTax();
			System.out.println("Personal Income Tax: "+decimal.format(resultrsonalncomeTax));
			
			double resultRF=esalary.calcRealField();
			System.out.println("Real Field: "+decimal.format(resultRF));
		} catch (NumberFormatException | IOException e) {
			System.out.println("Infor: " + e.getMessage());
		}
	}
	public void openWriteStaffFile(){
		Staff staff1=new Staff();
		ObjectOutputStream out;
		try{
			out=new ObjectOutputStream(new FileOutputStream("src/exercise64Staff/employee.txt")){
				@Override
				protected void writeStreamHeader() throws IOException{
					reset();
				}
			};
			out.writeObject(staff1);
			out.close();
			//info print is success
			System.out.println("Add is success");
		}catch(IOException ex){
			System.out.println("Error: "+ex.getMessage());
		}
	}
	public void readFile() throws FileNotFoundException, IOException, ClassNotFoundException {
		try(ObjectInputStream in= new ObjectInputStream (new BufferedInputStream(new FileInputStream("src/exercise64Staff/employee.txt")))){
			while(true){
				Staff staff=(Staff) in.readObject();
				System.out.println(toString());
			}
		}
		
	}

}
